<template>
    <div id="import-members-errors-view" class="st-view background">
        <STNavigationBar title="Kijk deze fouten na" :dismiss="canDismiss" :pop="canPop" />

        <main>
            <h1>Kijk deze fouten na</h1>
            <p>In sommige rijen hebben we gegevens gevonden die we niet 100% goed konden interpreteren. Kijk hieronder na waar je nog wijzigingen moet aanbrengen en pas het aan in jouw bestand.</p>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>
                            Fout
                        </th>
                        <th>Cel</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="(error, index) in importErrors" :key="index">
                        <td>
                            {{ error.message }}
                        </td>
                        <td class="nowrap">
                            {{ error.cellPath }}
                        </td>
                    </tr>
                </tbody>
            </table>

            <STErrorsDefault :error-box="errors.errorBox" />
        </main>

        <STToolbar>
            <template #right>
                <LoadingButton :loading="saving">
                    <button class="button primary" type="button" @click="() => pop()">
                        Nieuw bestand uploaden
                    </button>
                </LoadingButton>
            </template>
        </STToolbar>
    </div>
</template>

<script lang="ts" setup>
import { useCanDismiss, useCanPop, usePop } from '@simonbackx/vue-app-navigation';
import { LoadingButton, STErrorsDefault, STNavigationBar, STToolbar, useErrors } from '@stamhoofd/components';
import { ref } from 'vue';
import { ImportError } from '../../../../../classes/import/ImportError';

defineProps<{
    importErrors: ImportError[];
}>();

const errors = useErrors();
const canDismiss = useCanDismiss();
const canPop = useCanPop();
const pop = usePop();

const saving = ref(false);
</script>
